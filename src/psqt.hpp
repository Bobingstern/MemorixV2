#include <stdint.h>
#include <ctype.h>
#include <stdlib.h>
#include <string.h>

#define MakeScore(mg, eg) ((int32_t)((uint32_t)(eg) << 16) + (mg))
#define S(mg, eg) MakeScore((mg), (eg))
#define MgScore(s) ((int16_t)((uint16_t)((uint32_t)((s)))))
#define EgScore(s) ((int16_t)((uint16_t)((uint32_t)((s) + 0x8000) >> 16)))

// PSQT are in the pov of BLACK
// Makes it easier to visualize cuz no mirroring is required (remember A1 is 0 and H8 is 63)

#ifdef DEV
  const int32_t PSQT[7][64] = {
    {S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(-47, 180), S(24, 180), S(111, 118), S(134, 95), S(85, 115), S(40, 163), S(53, 189), S(69, 190), S(-35, 60), S(16, 44), S(96, -3), S(58, 10), S(17, 34), S(29, 59), S(-6, 80), S(-42, 89), S(-36, -41), S(13, -47), S(15, -67), S(39, -80), S(19, -65), S(0, -48), S(8, -29), S(-26, -10), S(-56, -67), S(10, -71), S(9, -87), S(19, -85), S(25, -85), S(-5, -78), S(-1, -55), S(-55, -41), S(-9, -76), S(51, -77), S(-7, -77), S(12, -74), S(-4, -65), S(1, -80), S(-6, -57), S(-45, -52), S(-7, -75), S(67, -73), S(22, -62), S(-17, -57), S(-35, -46), S(-13, -53), S(11, -52), S(-49, -36), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), },
    {S(-158, -130), S(-149, -50), S(-131, -47), S(68, -61), S(-24, -40), S(-32, -38), S(-65, -81), S(-314, -30), S(46, -87), S(48, -59), S(161, -66), S(170, -67), S(84, -32), S(157, -54), S(9, -39), S(-49, -57), S(39, -45), S(145, -54), S(225, -40), S(182, -43), S(148, -7), S(90, 0), S(84, -41), S(39, -53), S(87, -46), S(60, -3), S(126, -2), S(86, 12), S(135, 11), S(75, 2), S(80, -1), S(69, -38), S(22, -29), S(61, -29), S(90, -9), S(86, 14), S(74, 9), S(78, 7), S(52, -15), S(38, -35), S(20, -60), S(84, -43), S(72, -20), S(81, -1), S(71, 3), S(77, -24), S(48, -19), S(25, -48), S(36, -60), S(34, -48), S(47, -26), S(44, -19), S(47, -17), S(49, -38), S(7, -45), S(19, -63), S(-64, -60), S(20, -71), S(30, -30), S(9, -39), S(10, -23), S(-23, -38), S(25, -75), S(-34, -91), },
    {S(-56, -36), S(30, -61), S(-9, -46), S(-117, -28), S(-41, -37), S(9, -62), S(8, -72), S(-6, -48), S(76, -89), S(61, -43), S(141, -66), S(75, -45), S(49, -56), S(33, -42), S(68, -46), S(13, -64), S(103, -60), S(116, -44), S(136, -36), S(140, -52), S(85, -28), S(121, -40), S(62, -40), S(30, -36), S(40, -51), S(66, -44), S(62, -36), S(91, -24), S(95, -21), S(83, -32), S(52, -22), S(15, -32), S(19, -58), S(66, -52), S(73, -27), S(98, -32), S(98, -37), S(69, -23), S(64, -41), S(39, -51), S(79, -70), S(71, -65), S(81, -39), S(72, -27), S(71, -27), S(78, -34), S(81, -40), S(87, -70), S(65, -78), S(101, -58), S(69, -49), S(51, -31), S(50, -40), S(66, -56), S(97, -74), S(30, -49), S(44, -71), S(43, -76), S(27, -63), S(19, -49), S(30, -46), S(50, -89), S(23, -55), S(61, -86), },
    {S(103, -36), S(153, -50), S(189, -56), S(191, -48), S(147, -35), S(142, -27), S(133, -29), S(124, -21), S(152, -57), S(191, -57), S(186, -52), S(108, -38), S(156, -37), S(107, -20), S(53, -4), S(64, -21), S(132, -57), S(173, -60), S(144, -56), S(125, -53), S(113, -43), S(69, -31), S(70, -27), S(51, -22), S(110, -58), S(112, -57), S(85, -47), S(65, -40), S(97, -44), S(75, -32), S(44, -32), S(7, -20), S(48, -61), S(54, -55), S(45, -48), S(41, -36), S(38, -29), S(10, -22), S(5, -25), S(6, -29), S(58, -66), S(81, -73), S(40, -56), S(44, -45), S(53, -46), S(41, -42), S(17, -35), S(-1, -39), S(-22, -38), S(58, -51), S(15, -34), S(34, -40), S(30, -32), S(19, -28), S(24, -38), S(-10, -32), S(44, -86), S(13, -36), S(46, -45), S(62, -36), S(60, -17), S(56, -29), S(32, -29), S(26, -41), },
    {S(-38, 44), S(-1, -14), S(75, 11), S(83, -1), S(46, 26), S(40, 1), S(-10, 11), S(-41, -8), S(199, -132), S(53, 41), S(150, 43), S(-36, 77), S(-67, 108), S(-28, 38), S(-27, 0), S(-14, -11), S(104, -51), S(175, -58), S(119, -1), S(65, 71), S(60, 1), S(24, 25), S(-4, -11), S(-15, -43), S(43, -7), S(2, 44), S(26, 66), S(8, 77), S(4, 43), S(8, 6), S(0, 12), S(-22, -27), S(7, -14), S(32, 1), S(21, 9), S(21, 27), S(7, 49), S(7, 3), S(8, 2), S(-2, -25), S(14, -37), S(32, -2), S(27, -3), S(9, 10), S(22, -19), S(8, 25), S(29, -65), S(0, -59), S(26, -59), S(46, -99), S(31, -84), S(22, -17), S(19, -4), S(31, -42), S(28, -25), S(-4, -25), S(0, -75), S(-55, -34), S(-16, -53), S(4, -28), S(38, -109), S(13, -51), S(-2, -53), S(17, -39), },
    {S(-4, -62), S(48, -21), S(81, -16), S(77, -27), S(28, -25), S(60, -38), S(58, -42), S(39, -96), S(-29, -4), S(15, 34), S(130, 29), S(70, 14), S(80, 6), S(84, 7), S(121, 0), S(24, -42), S(-23, 3), S(130, 34), S(118, 53), S(37, 56), S(114, 39), S(67, 36), S(185, 0), S(42, -38), S(-74, 0), S(12, 30), S(0, 62), S(-13, 76), S(18, 73), S(75, 36), S(37, 1), S(12, -53), S(-134, -5), S(-47, 23), S(-94, 69), S(-60, 77), S(-69, 73), S(31, 40), S(54, -8), S(44, -64), S(-78, -17), S(-15, 11), S(-72, 47), S(-99, 58), S(-92, 55), S(-77, 38), S(34, -8), S(-2, -57), S(-33, -39), S(-3, -10), S(-77, 25), S(-110, 35), S(-126, 38), S(-63, 14), S(-50, -10), S(7, -58), S(-57, -87), S(-24, -66), S(-125, -25), S(-61, -57), S(-139, -23), S(-61, -39), S(-36, -59), S(-158, -58), },
    {0}
  };
#else
  const int32_t PSQT[7][64] PROGMEM = {

    { S(  0,  0), S(  0,  0), S(  0,  0), S(  0,  0), S(  0,  0), S(  0,  0), S(  0,  0), S(  0,  0),
      S( 57,  3), S( 51, 32), S( 32, 64), S( 73, 35), S( 82, 40), S( 88, 27), S(-40, 85), S(-52, 53),
      S(  2, 74), S( 16, 77), S( 33, 53), S( 39, 28), S( 62, 31), S(133, 32), S( 91, 60), S( 33, 66),
      S(-11, 40), S(-11, 19), S(-10,  6), S(  4,-25), S( 23,-15), S( 39,-17), S( 10,  8), S(  2, 16),
      S(-18, 19), S(-27, 13), S(-13,-12), S(-15,-16), S( -3,-16), S(  4,-14), S( -4, -8), S( -4, -6),
      S(-25,  4), S(-35, -3), S(-30, -3), S(-25, -9), S(-15,  1), S( -7,  4), S(  2,-16), S( -5,-15),
      S(-13, 10), S(-14,  8), S(-21, 12), S(-11, 10), S(-17, 31), S( 19, 17), S( 32, -4), S(  3,-24),
      S(  0,  0), S(  0,  0), S(  0,  0), S(  0,  0), S(  0,  0), S(  0,  0), S(  0,  0), S(  0,  0) },

    { S(-207,-71), S(-112,-12), S(-145, 34), S(-53,  8), S( -1, 16), S(-128, 43), S(-79,-11), S(-158,-115),
      S(  0,-26), S(  0, -1), S( 51,-12), S( 57, 27), S( 65, 10), S( 79,-32), S(-12,  2), S( 16,-41),
      S(-21,-13), S( 26,  6), S( 36, 53), S( 55, 53), S( 98, 31), S( 80, 36), S( 45, -6), S(  3,-19),
      S(  9, -3), S( 25, 18), S( 48, 56), S( 43, 73), S( 29, 71), S( 69, 48), S( 30, 25), S( 39, -3),
      S(  0,  2), S( 18, 12), S( 23, 56), S( 27, 58), S( 25, 59), S( 36, 54), S( 54, 13), S( 31, 13),
      S(-22,-44), S( -5, -5), S( -1, 15), S( 15, 39), S( 16, 37), S(  8, 14), S( 11,  1), S( -1,-17),
      S(-34,-37), S(-40, -3), S(-19,-16), S( -5, 10), S(-10,  6), S(-10,-16), S(-22,-15), S( -6, -6),
      S(-88,-61), S(-15,-52), S(-40,-19), S( -7,  7), S(  0,  6), S( -5,-26), S(-13,-22), S(-54,-37) },

    { S(-40, 51), S(-55, 44), S(-133, 58), S(-125, 63), S(-128, 57), S(-150, 49), S(-25, 25), S(-39, 24),
      S(-21, 23), S( 23, 29), S(  8, 28), S(-23, 36), S(  7, 23), S( -7, 33), S(-18, 37), S(-49, 31),
      S(  4, 25), S( 31, 24), S( 57, 24), S( 39, 18), S( 49, 22), S( 57, 33), S( 27, 33), S( 12, 18),
      S( -5, 17), S( 40, 19), S( 30, 20), S( 58, 39), S( 44, 36), S( 38, 27), S( 45, 19), S( -1, 23),
      S( 15, -7), S( 21,  2), S( 23, 29), S( 39, 30), S( 34, 31), S( 25, 21), S( 25, 10), S( 40, -8),
      S( 12, -8), S( 32, 11), S( 22, 14), S( 16, 21), S( 21, 25), S( 27, 13), S( 35,  1), S( 37, -8),
      S( 25,-13), S( 22,-31), S( 26,-12), S(  2,  5), S(  3,  6), S( 10,-13), S( 29,-30), S( 29,-53),
      S( 34,-17), S( 40, -2), S( 15,  7), S( -4,  5), S(  9,  6), S( 12, -2), S( 22, -8), S( 33,-24) },

    { S( 36, 67), S( 36, 78), S( -3, 98), S(  4, 88), S( 14, 88), S( 15, 88), S( 34, 83), S( 50, 75),
      S( -1, 74), S(-17, 84), S( 11, 82), S( 18, 85), S(  8, 83), S( 19, 52), S(  4, 62), S( 27, 51),
      S( -3, 68), S( 50, 45), S( 26, 64), S( 53, 46), S( 70, 33), S( 65, 44), S( 89, 18), S( 30, 46),
      S( -8, 64), S( 14, 58), S( 25, 60), S( 47, 48), S( 41, 44), S( 46, 36), S( 44, 32), S( 25, 43),
      S(-23, 43), S(-21, 60), S(-20, 58), S(-12, 48), S(-16, 44), S(-20, 45), S(  5, 36), S(-12, 30),
      S(-30, 20), S(-22, 34), S(-30, 29), S(-23, 21), S(-22, 21), S(-22, 11), S(  7,  6), S(-18,  5),
      S(-49, 21), S(-26, 19), S(-17, 22), S(-13, 14), S( -9,  7), S(-18,  0), S( -7, -6), S(-44, 12),
      S(-23, 26), S(-22, 25), S(-20, 28), S(-10, 12), S(-11, 10), S( -9, 19), S( -3, 14), S(-19, 10) },

    { S(-32, 87), S(-10,101), S( -5,128), S( 10,135), S(  7,157), S( 45,146), S( 43,134), S( 31,125),
      S(-18, 57), S(-60, 99), S(-29,105), S(-84,199), S(-80,239), S(-15,179), S(-43,165), S( 16,150),
      S(-15, 44), S(  0, 33), S(-10, 79), S(-15,122), S(  7,164), S( 42,167), S( 63,126), S( 14,149),
      S(  3, 17), S(  2, 60), S(-11, 70), S(-15,130), S(-12,167), S(  0,182), S( 40,166), S( 18,133),
      S( 12, -3), S( 10, 45), S(  1, 50), S( -6, 95), S( -8,103), S( 11, 87), S( 27, 72), S( 39, 76),
      S(  6,-26), S( 19,  3), S(  9, 27), S(  4, 21), S(  8, 24), S(  8, 27), S( 35, -6), S( 28,-13),
      S( 10,-37), S( 15,-28), S( 20,-40), S( 15, -3), S( 16,-13), S( 17,-95), S( 29,-125), S( 23,-78),
      S(  2,-44), S( -6,-47), S( -2,-42), S(  7,-44), S(  6,-47), S(-16,-53), S( -1,-83), S( 12,-57) },

    { S(-24,-67), S( 25, 18), S( 11, 45), S(  9, 83), S(  0, 59), S( 25, 71), S( 43, 88), S( 15,-58),
      S( -6, 29), S( 54,110), S( 55,112), S( 78, 99), S( 81,100), S( 89,115), S( 95,132), S( 42, 45),
      S( 35, 64), S(133,110), S(120,132), S( 92,137), S(128,131), S(162,138), S(147,124), S( 45, 64),
      S( 38, 67), S(109, 98), S(103,138), S( 65,158), S( 78,154), S(128,130), S(118,103), S(  2, 72),
      S( 29, 30), S(122, 74), S(129,113), S( 45,151), S( 90,140), S(125,115), S(123, 81), S(-36, 61),
      S( 37, 30), S(119, 56), S( 93, 87), S( 71,109), S( 92,105), S( 79, 99), S( 91, 68), S(  7, 52),
      S( 80, 33), S( 80, 53), S( 61, 72), S(  5, 88), S( 22, 87), S( 34, 86), S( 72, 60), S( 63, 27),
      S( 40,-41), S( 90, 12), S( 55, 41), S(-35, 34), S( 29,  5), S(-30, 60), S( 70, 12), S( 47,-51) },
      {0},
};
#endif
